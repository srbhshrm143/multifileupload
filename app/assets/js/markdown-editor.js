(self.webpackChunkmarketplace_template_poc=self.webpackChunkmarketplace_template_poc||[]).push([[18],{9966:function(P,p,d){"use strict";d.r(p);var m=d(5545),h=d.n(m),f=d(4396),y=(t,n,e)=>new Promise((s,l)=>{var i=o=>{try{c(e.next(o))}catch(r){l(r)}},u=o=>{try{c(e.throw(o))}catch(r){l(r)}},c=o=>o.done?s(o.value):Promise.resolve(o.value).then(i,u);c((e=e.apply(t,n)).next())});const a=document.querySelector('[data-s3-photo="form"]'),_=t=>{const n=a.dataset.s3UppyObjectUuid,e=a.dataset.s3UppyPhotoType;return(0,f.Z)("/api/photos",{body:JSON.stringify({photo:{direct_url:t,photo_type:e,object_uuid:n}})})},v=(t,n)=>{const e=t.indexOf(`<${n}>`),s=t.indexOf(`</${n}>`,e);return e!==-1&&s!==-1?t.slice(e+n.length+2,s):""};Array.from(document.querySelectorAll("[data-markdown-editor]")).forEach(t=>{const n=new(h())({element:t,showIcons:["code","upload-image"],hideIcons:["image","side-by-side","fullscreen","preview"],uploadImage:!0,status:!1,minHeight:t.rows*1.8+"rem",imageUploadFunction:function(l,i,u){return y(this,null,function*(){const c=new FormData(a);c.set("file",l,l.name);const o=yield fetch(a.action,{method:a.method,body:c});if(o.ok){const r=yield o.text(),E=v(r,"Location"),O=(yield _(E)).photo.versions.uncropped.replace(/\s/g,"%20");i(O)}else u("Can't upload an image")})}}),e=t.attributes.id.value,s=document.querySelector(`label[for="${e}"]`);s&&(s.onclick=function(){n.codemirror.focus()})})},2562:function(){}}]);
