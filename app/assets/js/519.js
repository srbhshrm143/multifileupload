"use strict";(self.webpackChunkmarketplace_template_poc=self.webpackChunkmarketplace_template_poc||[]).push([[519],{1648:function(c){c.exports=function(s,i,r){return new Promise(h=>{s.toBlob(h,i,r)})}},384:function(c){const l={"audio/mp3":"mp3","audio/mp4":"mp4","audio/ogg":"ogg","audio/webm":"webm","image/gif":"gif","image/heic":"heic","image/heif":"heif","image/jpeg":"jpg","image/png":"png","image/svg+xml":"svg","video/mp4":"mp4","video/ogg":"ogv","video/quicktime":"mov","video/webm":"webm","video/x-matroska":"mkv","video/x-msvideo":"avi"};c.exports=function(i){return[i]=i.split(";",1),l[i]||null}},8107:function(c,l,s){const{h:i}=s(3233);c.exports=()=>i("svg",{"aria-hidden":"true",focusable:"false",fill:"#0097DC",width:"66",height:"55",viewBox:"0 0 66 55"},i("path",{d:"M57.3 8.433c4.59 0 8.1 3.51 8.1 8.1v29.7c0 4.59-3.51 8.1-8.1 8.1H8.7c-4.59 0-8.1-3.51-8.1-8.1v-29.7c0-4.59 3.51-8.1 8.1-8.1h9.45l4.59-7.02c.54-.54 1.35-1.08 2.16-1.08h16.2c.81 0 1.62.54 2.16 1.08l4.59 7.02h9.45zM33 14.64c-8.62 0-15.393 6.773-15.393 15.393 0 8.62 6.773 15.393 15.393 15.393 8.62 0 15.393-6.773 15.393-15.393 0-8.62-6.773-15.393-15.393-15.393zM33 40c-5.648 0-9.966-4.319-9.966-9.967 0-5.647 4.318-9.966 9.966-9.966s9.966 4.319 9.966 9.966C42.966 35.681 38.648 40 33 40z",fillRule:"evenodd"}))},6555:function(c,l,s){function i(){return i=Object.assign||function(u){for(var g=1;g<arguments.length;g++){var S=arguments[g];for(var w in S)Object.prototype.hasOwnProperty.call(S,w)&&(u[w]=S[w])}return u},i.apply(this,arguments)}const{h:r,Component:h}=s(3233),d=s(8451),m=s(7019),b=s(778),L=s(4418),R=s(8089),F=s(5726);function M(u,g){return u.indexOf(g)!==-1}class k extends h{componentDidMount(){const{onFocus:g}=this.props;g()}componentWillUnmount(){const{onStop:g}=this.props;g()}render(){const{src:g,recordedVideo:S,recording:w,modes:T,supportsRecording:O,videoSources:x,showVideoSourceDropdown:B,showRecordingLength:V,onSubmit:E,i18n:P,mirror:N,onSnapshot:W,onStartRecording:z,onStopRecording:j,onDiscardRecordedVideo:D,recordingLengthSeconds:A}=this.props,I=!!S,$=!I&&O&&(M(T,"video-only")||M(T,"audio-only")||M(T,"video-audio")),n=!I&&M(T,"picture"),e=O&&V,t=B&&x&&x.length>1,o={playsinline:!0};return S?(o.muted=!1,o.controls=!0,o.src=S,this.videoElement&&(this.videoElement.srcObject=void 0)):(o.muted=!0,o.autoplay=!0,o.srcObject=g),r("div",{className:"uppy uppy-Webcam-container"},r("div",{className:"uppy-Webcam-videoContainer"},r("video",i({ref:a=>this.videoElement=a,className:`uppy-Webcam-video  ${N?"uppy-Webcam-video--mirrored":""}`},o))),r("div",{className:"uppy-Webcam-footer"},r("div",{className:"uppy-Webcam-videoSourceContainer"},t?L(this.props):null),r("div",{className:"uppy-Webcam-buttonContainer"},n&&r(d,{onSnapshot:W,i18n:P}),$&&r(m,{recording:w,onStartRecording:z,onStopRecording:j,i18n:P}),I&&r(R,{onSubmit:E,i18n:P}),I&&r(F,{onDiscard:D,i18n:P})),e&&r("div",{className:"uppy-Webcam-recordingLength"},r(b,{recordingLengthSeconds:A,i18n:P}))))}}c.exports=k},5726:function(c,l,s){const{h:i}=s(3233);function r({onDiscard:h,i18n:d}){return i("button",{className:"uppy-u-reset uppy-c-btn uppy-Webcam-button",type:"button",title:d("discardRecordedFile"),"aria-label":d("discardRecordedFile"),onClick:h,"data-uppy-super-focusable":!0},i("svg",{width:"13",height:"13",viewBox:"0 0 13 13",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",className:"uppy-c-icon"},i("g",{fill:"#FFF",fillRule:"evenodd"},i("path",{d:"M.496 11.367L11.103.76l1.414 1.414L1.911 12.781z"}),i("path",{d:"M11.104 12.782L.497 2.175 1.911.76l10.607 10.606z"}))))}c.exports=r},9079:function(c,l,s){const{h:i}=s(3233);c.exports=r=>i("div",{className:"uppy-Webcam-permissons"},i("div",{className:"uppy-Webcam-permissonsIcon"},r.icon()),i("h1",{className:"uppy-Webcam-title"},r.hasCamera?r.i18n("allowAccessTitle"):r.i18n("noCameraTitle")),i("p",null,r.hasCamera?r.i18n("allowAccessDescription"):r.i18n("noCameraDescription")))},7019:function(c,l,s){const{h:i}=s(3233);c.exports=function({recording:h,onStartRecording:d,onStopRecording:m,i18n:b}){return h?i("button",{className:"uppy-u-reset uppy-c-btn uppy-Webcam-button",type:"button",title:b("stopRecording"),"aria-label":b("stopRecording"),onClick:m,"data-uppy-super-focusable":!0},i("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"100",height:"100",viewBox:"0 0 100 100"},i("rect",{x:"15",y:"15",width:"70",height:"70"}))):i("button",{className:"uppy-u-reset uppy-c-btn uppy-Webcam-button",type:"button",title:b("startRecording"),"aria-label":b("startRecording"),onClick:d,"data-uppy-super-focusable":!0},i("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"100",height:"100",viewBox:"0 0 100 100"},i("circle",{cx:"50",cy:"50",r:"40"})))}},778:function(c,l,s){const{h:i}=s(3233),r=s(2662);c.exports=function({recordingLengthSeconds:d,i18n:m}){const b=r(d);return i("span",{"aria-label":m("recordingLength",{recording_length:b})},b)}},8451:function(c,l,s){const{h:i}=s(3233),r=s(8107);c.exports=({onSnapshot:h,i18n:d})=>i("button",{className:"uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--picture",type:"button",title:d("takePicture"),"aria-label":d("takePicture"),onClick:h,"data-uppy-super-focusable":!0},r())},8089:function(c,l,s){const{h:i}=s(3233);function r({onSubmit:h,i18n:d}){return i("button",{className:"uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--submit",type:"button",title:d("submitRecordedFile"),"aria-label":d("submitRecordedFile"),onClick:h,"data-uppy-super-focusable":!0},i("svg",{width:"12",height:"9",viewBox:"0 0 12 9",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",className:"uppy-c-icon"},i("path",{fill:"#fff",fillRule:"nonzero",d:"M10.66 0L12 1.31 4.136 9 0 4.956l1.34-1.31L4.136 6.38z"})))}c.exports=r},4418:function(c,l,s){const{h:i}=s(3233);c.exports=({currentDeviceId:r,videoSources:h,onChangeVideoSource:d})=>i("div",{className:"uppy-Webcam-videoSource"},i("select",{className:"uppy-u-reset uppy-Webcam-videoSource-select",onChange:m=>{d(m.target.value)}},h.map(m=>i("option",{key:m.deviceId,value:m.deviceId,selected:m.deviceId===r},m.label))))},2662:function(c){c.exports=function(s){return`${Math.floor(s/60)}:${String(s%60).padStart(2,0)}`}},5519:function(c,l,s){var i=Object.defineProperty,r=Object.defineProperties,h=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,L=(n,e,t)=>e in n?i(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,R=(n,e)=>{for(var t in e||(e={}))m.call(e,t)&&L(n,t,e[t]);if(d)for(var t of d(e))b.call(e,t)&&L(n,t,e[t]);return n},F=(n,e)=>r(n,h(e)),M=(n,e,t)=>new Promise((o,a)=>{var f=y=>{try{p(t.next(y))}catch(C){a(C)}},v=y=>{try{p(t.throw(y))}catch(C){a(C)}},p=y=>y.done?o(y.value):Promise.resolve(y.value).then(f,v);p((t=t.apply(n,e)).next())}),k,u,g;function S(){return S=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},S.apply(this,arguments)}function w(n,e){if(!Object.prototype.hasOwnProperty.call(n,e))throw new TypeError("attempted to use private field on non-instance");return n}var T=0;function O(n){return"__private_"+T+++"_"+n}const{h:x}=s(3233),{UIPlugin:B}=s(9046),V=s(384),E=s(5092),P=s(1648),N=s(7931),W=s(8107),z=s(6555),j=s(9079);function D(n){return n[0]==="."?E[n.slice(1)]:n}function A(n){return/^video\/[^*]+$/.test(n)}function I(n){return/^image\/[^*]+$/.test(n)}function $(){return navigator.mediaDevices}c.exports=(g=(u=O("enableMirror"),k=class extends B{constructor(e,t){super(e,t);Object.defineProperty(this,u,{writable:!0,value:void 0}),this.mediaDevices=$(),this.supportsUserMedia=!!this.mediaDevices,this.protocol=location.protocol.match(/https/i)?"https":"http",this.id=this.opts.id||"Webcam",this.type="acquirer",this.capturedMediaFile=null,this.icon=()=>x("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},x("g",{fill:"none",fillRule:"evenodd"},x("rect",{className:"uppy-ProviderIconBg",fill:"#03BFEF",width:"32",height:"32",rx:"16"}),x("path",{d:"M22 11c1.133 0 2 .867 2 2v7.333c0 1.134-.867 2-2 2H10c-1.133 0-2-.866-2-2V13c0-1.133.867-2 2-2h2.333l1.134-1.733C13.6 9.133 13.8 9 14 9h4c.2 0 .4.133.533.267L19.667 11H22zm-6 1.533a3.764 3.764 0 0 0-3.8 3.8c0 2.129 1.672 3.801 3.8 3.801s3.8-1.672 3.8-3.8c0-2.13-1.672-3.801-3.8-3.801zm0 6.261c-1.395 0-2.46-1.066-2.46-2.46 0-1.395 1.065-2.461 2.46-2.461s2.46 1.066 2.46 2.46c0 1.395-1.065 2.461-2.46 2.461z",fill:"#FFF",fillRule:"nonzero"}))),this.defaultLocale={strings:{pluginNameCamera:"Camera",smile:"Smile!",takePicture:"Take a picture",startRecording:"Begin video recording",stopRecording:"Stop video recording",allowAccessTitle:"Please allow access to your camera",allowAccessDescription:"In order to take pictures or record video with your camera, please allow camera access for this site.",noCameraTitle:"Camera Not Available",noCameraDescription:"In order to take pictures or record video, please connect a camera device",recordingStoppedMaxSize:"Recording stopped because the file size is about to exceed the limit",recordingLength:"Recording length %{recording_length}",submitRecordedFile:"Submit recorded file",discardRecordedFile:"Discard recorded file"}};const o={onBeforeSnapshot:()=>Promise.resolve(),countdown:!1,modes:["video-audio","video-only","audio-only","picture"],mirror:!0,showVideoSourceDropdown:!1,facingMode:"user",preferredImageMimeType:null,preferredVideoMimeType:null,showRecordingLength:!1};this.opts=R(R({},o),t),this.i18nInit(),this.title=this.i18n("pluginNameCamera"),w(this,u)[u]=this.opts.mirror,this.install=this.install.bind(this),this.setPluginState=this.setPluginState.bind(this),this.render=this.render.bind(this),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this.takeSnapshot=this.takeSnapshot.bind(this),this.startRecording=this.startRecording.bind(this),this.stopRecording=this.stopRecording.bind(this),this.discardRecordedVideo=this.discardRecordedVideo.bind(this),this.submit=this.submit.bind(this),this.oneTwoThreeSmile=this.oneTwoThreeSmile.bind(this),this.focus=this.focus.bind(this),this.changeVideoSource=this.changeVideoSource.bind(this),this.webcamActive=!1,this.opts.countdown&&(this.opts.onBeforeSnapshot=this.oneTwoThreeSmile),this.setPluginState({hasCamera:!1,cameraReady:!1,cameraError:null,recordingLengthSeconds:0,videoSources:[],currentDeviceId:null})}setOptions(e){super.setOptions(F(R({},e),{videoConstraints:R(R({},this.opts.videoConstraints),e==null?void 0:e.videoConstraints)}))}hasCameraCheck(){return this.mediaDevices?this.mediaDevices.enumerateDevices().then(e=>e.some(t=>t.kind==="videoinput")):Promise.resolve(!1)}isAudioOnly(){return this.opts.modes.length===1&&this.opts.modes[0]==="audio-only"}getConstraints(e=null){const t=this.opts.modes.indexOf("video-audio")!==-1||this.opts.modes.indexOf("audio-only")!==-1,o=!this.isAudioOnly()&&(this.opts.modes.indexOf("video-audio")!==-1||this.opts.modes.indexOf("video-only")!==-1||this.opts.modes.indexOf("picture")!==-1),a=R(R({},this.opts.videoConstraints||{facingMode:this.opts.facingMode}),e?{deviceId:e,facingMode:null}:{});return{audio:t,video:o?a:!1}}start(e=null){if(!this.supportsUserMedia)return Promise.reject(new Error("Webcam access not supported"));this.webcamActive=!0,this.opts.mirror&&(w(this,u)[u]=!0);const t=this.getConstraints(e&&e.deviceId?e.deviceId:null);this.hasCameraCheck().then(o=>(this.setPluginState({hasCamera:o}),this.mediaDevices.getUserMedia(t).then(a=>{this.stream=a;let f=null;const v=this.isAudioOnly()?a.getAudioTracks():a.getVideoTracks();!e||!e.deviceId?f=v[0].getSettings().deviceId:v.forEach(p=>{p.getSettings().deviceId===e.deviceId&&(f=p.getSettings().deviceId)}),this.updateVideoSources(),this.setPluginState({currentDeviceId:f,cameraReady:!0})}).catch(a=>{this.setPluginState({cameraReady:!1,cameraError:a}),this.uppy.info(a.message,"error")})))}getMediaRecorderOptions(){const e={};if(MediaRecorder.isTypeSupported){const{restrictions:t}=this.uppy.opts;let o=[];this.opts.preferredVideoMimeType?o=[this.opts.preferredVideoMimeType]:t.allowedFileTypes&&(o=t.allowedFileTypes.map(D).filter(A));const a=v=>MediaRecorder.isTypeSupported(v)&&V(v),f=o.filter(a);f.length>0&&(e.mimeType=f[0])}return e}startRecording(){this.recorder=new MediaRecorder(this.stream,this.getMediaRecorderOptions()),this.recordingChunks=[];let e=!1;this.recorder.addEventListener("dataavailable",t=>{this.recordingChunks.push(t.data);const{restrictions:o}=this.uppy.opts;if(this.recordingChunks.length>1&&o.maxFileSize!=null&&!e){const a=this.recordingChunks.reduce((y,C)=>y+C.size,0),v=(a-this.recordingChunks[0].size)/(this.recordingChunks.length-1)*3,p=Math.max(0,o.maxFileSize-v);a>p&&(e=!0,this.uppy.info(this.i18n("recordingStoppedMaxSize"),"warning",4e3),this.stopRecording())}}),this.recorder.start(500),this.opts.showRecordingLength&&(this.recordingLengthTimer=setInterval(()=>{const t=this.getPluginState().recordingLengthSeconds;this.setPluginState({recordingLengthSeconds:t+1})},1e3)),this.setPluginState({isRecording:!0})}stopRecording(){return new Promise(t=>{this.recorder.addEventListener("stop",()=>{t()}),this.recorder.stop(),this.opts.showRecordingLength&&(clearInterval(this.recordingLengthTimer),this.setPluginState({recordingLengthSeconds:0}))}).then(()=>(this.setPluginState({isRecording:!1}),this.getVideo())).then(t=>{try{this.capturedMediaFile=t,this.setPluginState({recordedVideo:URL.createObjectURL(t.data)}),w(this,u)[u]=!1}catch(o){o.isRestriction||this.uppy.log(o)}}).then(()=>{this.recordingChunks=null,this.recorder=null},t=>{throw this.recordingChunks=null,this.recorder=null,t})}discardRecordedVideo(){this.setPluginState({recordedVideo:null}),this.opts.mirror&&(w(this,u)[u]=!0),this.capturedMediaFile=null}submit(){try{this.capturedMediaFile&&this.uppy.addFile(this.capturedMediaFile)}catch(e){e.isRestriction||this.uppy.log(e,"error")}}stop(){return M(this,null,function*(){if(this.stream){const e=this.stream.getAudioTracks(),t=this.stream.getVideoTracks();e.concat(t).forEach(o=>o.stop())}this.recorder&&(yield new Promise(e=>{this.recorder.addEventListener("stop",e,{once:!0}),this.recorder.stop(),this.opts.showRecordingLength&&clearInterval(this.recordingLengthTimer)})),this.recordingChunks=null,this.recorder=null,this.webcamActive=!1,this.stream=null,this.setPluginState({recordedVideo:null,isRecording:!1,recordingLengthSeconds:0})})}getVideoElement(){return this.el.querySelector(".uppy-Webcam-video")}oneTwoThreeSmile(){return new Promise((e,t)=>{let o=this.opts.countdown;const a=setInterval(()=>{if(!this.webcamActive)return clearInterval(a),this.captureInProgress=!1,t(new Error("Webcam is not active"));o>0?(this.uppy.info(`${o}...`,"warning",800),o--):(clearInterval(a),this.uppy.info(this.i18n("smile"),"success",1500),setTimeout(()=>e(),1500))},1e3)})}takeSnapshot(){this.captureInProgress||(this.captureInProgress=!0,this.opts.onBeforeSnapshot().catch(e=>{const t=typeof e=="object"?e.message:e;return this.uppy.info(t,"error",5e3),Promise.reject(new Error(`onBeforeSnapshot: ${t}`))}).then(()=>this.getImage()).then(e=>{this.captureInProgress=!1;try{this.uppy.addFile(e)}catch(t){t.isRestriction||this.uppy.log(t)}},e=>{throw this.captureInProgress=!1,e}))}getImage(){const e=this.getVideoElement();if(!e)return Promise.reject(new Error("No video element found, likely due to the Webcam tab being closed."));const t=e.videoWidth,o=e.videoHeight,a=document.createElement("canvas");a.width=t,a.height=o,a.getContext("2d").drawImage(e,0,0);const{restrictions:v}=this.uppy.opts;let p=[];this.opts.preferredImageMimeType?p=[this.opts.preferredImageMimeType]:v.allowedFileTypes&&(p=v.allowedFileTypes.map(D).filter(I));const y=p[0]||"image/jpeg",C=V(y)||"jpg",U=`cam-${Date.now()}.${C}`;return P(a,y).then(H=>({source:this.id,name:U,data:new Blob([H],{type:y}),type:y}))}getVideo(){const e=this.recordingChunks.find(v=>{var p;return((p=v.type)==null?void 0:p.length)>0}).type,t=V(e);if(!t)return Promise.reject(new Error(`Could not retrieve recording: Unsupported media type "${e}"`));const o=`webcam-${Date.now()}.${t}`,a=new Blob(this.recordingChunks,{type:e}),f={source:this.id,name:o,data:new Blob([a],{type:e}),type:e};return Promise.resolve(f)}focus(){!this.opts.countdown||setTimeout(()=>{this.uppy.info(this.i18n("smile"),"success",1500)},1e3)}changeVideoSource(e){this.stop(),this.start({deviceId:e})}updateVideoSources(){this.mediaDevices.enumerateDevices().then(e=>{this.setPluginState({videoSources:e.filter(t=>t.kind==="videoinput")})})}render(){this.webcamActive||this.start();const e=this.getPluginState();return!e.cameraReady||!e.hasCamera?x(j,{icon:W,i18n:this.i18n,hasCamera:e.hasCamera}):x(z,S({},e,{onChangeVideoSource:this.changeVideoSource,onSnapshot:this.takeSnapshot,onStartRecording:this.startRecording,onStopRecording:this.stopRecording,onDiscardRecordedVideo:this.discardRecordedVideo,onSubmit:this.submit,onFocus:this.focus,onStop:this.stop,i18n:this.i18n,modes:this.opts.modes,showRecordingLength:this.opts.showRecordingLength,showVideoSourceDropdown:this.opts.showVideoSourceDropdown,supportsRecording:N(),recording:e.isRecording,mirror:w(this,u)[u],src:this.stream}))}install(){this.setPluginState({cameraReady:!1,recordingLengthSeconds:0});const{target:e}=this.opts;e&&this.mount(e,this),this.mediaDevices&&(this.updateVideoSources(),this.mediaDevices.ondevicechange=()=>{if(this.updateVideoSources(),this.stream){let t=!0;const{videoSources:o,currentDeviceId:a}=this.getPluginState();o.forEach(f=>{a===f.deviceId&&(t=!1)}),t&&(this.stop(),this.start())}})}uninstall(){this.stop(),this.unmount()}onUnmount(){this.stop()}}),k.VERSION="2.0.2",g)},7931:function(c){c.exports=function(){return typeof MediaRecorder=="function"&&!!MediaRecorder.prototype&&typeof MediaRecorder.prototype.start=="function"}}}]);
