{% assign now = 'now' | to_time | strftime: '%Y-%m-%dT%H:%M:%S.%L%z' %}

<form action="{% render 'link_to', object: relation %}" method="post">
  {% render 'authenticity_token', token: context.authenticity_token %}
  <input type="hidden" name="_method" value="put" />
  <input type="hidden" name="id" value="{{ relation.id }}">
  <input type="hidden" name="l_id" value="{{ relation.l_id }}">
  <input type="hidden" name="r_id" value="{{ relation.r_id }}">
  <input type="hidden" name="l_accepted_at" value="{{ relation.l_accepted_at }}">
  <input type="hidden" name="r_accepted_at" value="{{ now }}">
  <input type="hidden" name="name" value="membership">
  <input type="hidden" name="return_to" value="{% render 'link_to', object: group, action: 'relationships' %}">
  <input type="hidden" name="notice_key" value="app.groups.relationships.approved">

  <button data-tc="ask-to-join" class="button {{ class }}">
    {{ 'app.groups.relationships.accept' | t }}
  </button>
</form>
